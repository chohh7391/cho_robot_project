<mujoco model="fr3">
  <compiler angle="radian" meshdir="assets"/>

  <option integrator="implicitfast"/>

  <default>
    <default class="fr3">
      <joint damping="0.21" armature="0.195" frictionloss="1.137"/>
      <position inheritrange="1"/>
      <default class="visual">
        <geom type="mesh" group="2" contype="0" conaffinity="0"/>
      </default>
      <default class="collision">
        <geom type="mesh" group="3" mass="0" density="0"/>
        <default class="fingertip_pad_collision_1">
          <geom type="box" size="0.0085 0.004 0.0085" pos="0 0.0055 0.0445"/>
        </default>
        <default class="fingertip_pad_collision_2">
          <geom type="box" size="0.003 0.002 0.003" pos="0.0055 0.002 0.05"/>
        </default>
        <default class="fingertip_pad_collision_3">
          <geom type="box" size="0.003 0.002 0.003" pos="-0.0055 0.002 0.05"/>
        </default>
        <default class="fingertip_pad_collision_4">
          <geom type="box" size="0.003 0.002 0.0035" pos="0.0055 0.002 0.0395"/>
        </default>
        <default class="fingertip_pad_collision_5">
          <geom type="box" size="0.003 0.002 0.0035" pos="-0.0055 0.002 0.0395"/>
        </default>
      </default>
      <default class="finger">
        <joint axis="0 1 0" type="slide" range="0 0.04" damping="1" armature="0.1"/>
      </default>
      <site size="0.001" rgba="0.5 0.5 0.5 0.3" group="4"/>
    </default>
  </default>

  <asset>
    <material name="black" rgba=".2 .2 .2 1"/>
    <material name="white" rgba="1 1 1 1"/>
    <material name="off_white" rgba="0.901961 0.921569 0.929412 1"/>
    <material name="red" rgba="1 0.072272 0.039546 1"/>
    <material name="gray" rgba="0.863156 0.863156 0.863157 1"/>
    <material name="button_green" rgba="0.102241 0.571125 0.102242 1"/>
    <material name="button_red" rgba="0.520996 0.008023 0.013702 1"/>
    <material name="button_blue" rgba="0.024157 0.445201 0.737911 1"/>

    <mesh file="link0_0.obj"/>
    <mesh file="link0_1.obj"/>
    <mesh file="link0_2.obj"/>
    <mesh file="link0_3.obj"/>
    <mesh file="link0_4.obj"/>
    <mesh file="link0_5.obj"/>
    <mesh file="link0_6.obj"/>
    <mesh file="link1.obj"/>
    <mesh file="link2.obj"/>
    <mesh file="link3_0.obj"/>
    <mesh file="link3_1.obj"/>
    <mesh file="link4_0.obj"/>
    <mesh file="link4_1.obj"/>
    <mesh file="link5_0.obj"/>
    <mesh file="link5_1.obj"/>
    <mesh file="link5_2.obj"/>
    <mesh file="link6_0.obj"/>
    <mesh file="link6_1.obj"/>
    <mesh file="link6_2.obj"/>
    <mesh file="link6_3.obj"/>
    <mesh file="link6_4.obj"/>
    <mesh file="link6_5.obj"/>
    <mesh file="link6_6.obj"/>
    <mesh file="link6_7.obj"/>
    <mesh file="link7_0.obj"/>
    <mesh file="link7_1.obj"/>
    <mesh file="link7_2.obj"/>
    <mesh file="link7_3.obj"/>
    <mesh file="hand_0.obj"/>
    <mesh file="hand_1.obj"/>
    <mesh file="hand_2.obj"/>
    <mesh file="hand_3.obj"/>
    <mesh file="hand_4.obj"/>
    <mesh file="finger_0.obj"/>
    <mesh file="finger_1.obj"/>

    <mesh name="link0_coll" file="link0.stl"/>
    <mesh name="link1_coll" file="link1.stl"/>
    <mesh name="link2_coll" file="link2.stl"/>
    <mesh name="link3_coll" file="link3.stl"/>
    <mesh name="link4_coll" file="link4.stl"/>
    <mesh name="link5_coll" file="link5.stl"/>
    <mesh name="link6_coll" file="link6.stl"/>
    <mesh name="link7_coll" file="link7.stl"/>
    <mesh name="hand_c" file="hand.stl"/>
  </asset>

  <worldbody>
    <body name="base" childclass="fr3">
      <body name="fr3_link0">
        <inertial pos="-0.0172 0.0004 0.0745" mass="2.3966" fullinertia="0.009 0.0115 0.0085 0.0 0.002 0.0"/>
        <geom mesh="link0_0" material="black" class="visual"/>
        <geom mesh="link0_1" material="white" class="visual"/>
        <geom mesh="link0_2" material="white" class="visual"/>
        <geom mesh="link0_3" material="white" class="visual"/>
        <geom mesh="link0_4" material="white" class="visual"/>
        <geom mesh="link0_5" material="red" class="visual"/>
        <geom mesh="link0_6" material="black" class="visual"/>
        <geom name="fr3_link0_collision" mesh="link0_coll" class="collision"/>
        <body name="fr3_link1" pos="0 0 0.333">
          <inertial pos="0.0000004128 -0.0181251324 -0.0386035970" mass="2.9274653454" fullinertia="0.023927316485107913 0.0224821613275756 0.006350098258530016 1.3317903455714081e-05 -0.00011404774918616684 -0.0019950320628240115"/>
          <joint name="fr3_joint1" axis="0 0 1" range="-2.9007 2.9007" actuatorfrcrange="-87 87"/>
          <geom name="fr3_link1_collision" class="collision" mesh="link1_coll"/>
          <geom material="white" mesh="link1" class="visual"/>
          <body name="fr3_link2" quat="1 -1 0 0">
            <inertial pos="0.0031828864 -0.0743221644 0.0088146084" mass="2.9355370338" fullinertia="0.041938946257609425 0.02514514885014724 0.06170214472888839 0.00020257331521090626 0.004077784227179924 -0.0042252158006570156"/>
            <joint name="fr3_joint2" axis="0 0 1" range="-1.8361 1.8361" actuatorfrcrange="-87 87"/>
            <geom material="white" mesh="link2" class="visual"/>
            <geom name="fr3_link2_collision" class="collision" mesh="link2_coll"/>
            <body name="fr3_link3" pos="0 -0.316 0" quat="1 1 0 0">
              <inertial pos="0.0407015686 -0.0048200565 -0.0289730823" mass="2.2449013699" fullinertia="0.02410142547240885 0.01974053266708178 0.019044494482244823 0.002404694559042109 -0.002856269270114313 -0.002104212683891874"/>
              <joint name="fr3_joint3" axis="0 0 1" range="-2.9007 2.9007" actuatorfrcrange="-87 87"/>
              <geom mesh="link3_0" material="white" class="visual"/>
              <geom mesh="link3_1" material="black" class="visual"/>
              <geom name="fr3_link3_collision" class="collision" mesh="link3_coll"/>
              <body name="fr3_link4" pos="0.0825 0 0" quat="1 1 0 0">
                <inertial pos="-0.0459100965 0.0630492960 -0.0085187868" mass="2.6155955791" fullinertia="0.03452998321913202 0.028881621933049058 0.04125471171146641 0.01322552265982813 0.01015142998484113 -0.0009762833870704552"/>
                <joint name="fr3_joint4" axis="0 0 1" range="-3.077 -0.1169" actuatorfrcrange="-87 87"/>
                <geom mesh="link4_0" material="white" class="visual"/>
                <geom mesh="link4_1" material="black" class="visual"/>
                <geom name="fr3_link4_collision" class="collision" mesh="link4_coll"/>
                <body name="fr3_link5" pos="-0.0825 0.384 0" quat="1 -1 0 0">
                  <inertial pos="-0.0016039605 0.0292536262 -0.0972965990" mass="2.3271207594" fullinertia="0.051610278463662895 0.04787729713371481 0.016423625579357254 -0.005715173387783472 -0.0035673167625872135 0.010673985108535986"/>
                  <joint name="fr3_joint5" axis="0 0 1" range="-2.8763 2.8763" actuatorfrcrange="-12 12" armature="0.074" frictionloss="0.763"/>
                  <geom mesh="link5_0" material="white" class="visual"/>
                  <geom mesh="link5_1" material="white" class="visual"/>
                  <geom mesh="link5_2" material="black" class="visual"/>
                  <geom name="fr3_link5_collision" class="collision" mesh="link5_coll"/>
                  <body name="fr3_link6" quat="1 1 0 0">
                    <inertial pos="0.0597131221 -0.0410294666 -0.0101692726" mass="1.8170376524" fullinertia="0.005412333594383447 0.014058329545509979 0.016080817924212554 0.006193456360285834 0.0014219289306117652 -0.0013140753741120031"/>
                    <joint name="fr3_joint6" axis="0 0 1" range="0.4398 4.6216" actuatorfrcrange="-12 12" armature="0.074" frictionloss="0.44"/>
                    <geom mesh="link6_0" material="button_green" class="visual"/>
                    <geom mesh="link6_1" material="white" class="visual"/>
                    <geom mesh="link6_2" material="white" class="visual"/>
                    <geom mesh="link6_3" material="gray" class="visual"/>
                    <geom mesh="link6_4" material="button_red" class="visual"/>
                    <geom mesh="link6_5" material="white" class="visual"/>
                    <geom mesh="link6_6" material="black" class="visual"/>
                    <geom mesh="link6_7" material="button_blue" class="visual"/>
                    <geom name="fr3_link6_collision" class="collision" mesh="link6_coll"/>
                    <body name="fr3_link7" pos="0.088 0 0" quat="1 1 0 0">
                      <inertial pos="0.0045225817 0.0086261921 -0.0161633251" mass="0.6271432862" fullinertia="0.00021092389150104718 0.00017718568002411474 5.993190599659971e-05 -2.433299114461931e-05 4.564480393778983e-05 8.744070223226438e-05"/>
                      <joint name="fr3_joint7" axis="0 0 1" range="-3.0508 3.0508" actuatorfrcrange="-12 12" armature="0.074" frictionloss="0.248"/>
                      <geom mesh="link7_0" material="black" class="visual"/>
                      <geom mesh="link7_1" material="white" class="visual"/>
                      <geom mesh="link7_2" material="white" class="visual"/>
                      <geom mesh="link7_3" material="black" class="visual"/>
                      <geom name="fr3_link7_collision" class="collision" mesh="link7_coll"/>
                      <site name="attachment_site" pos="0 0 0.107"/>
                      <body name="fr3_hand" pos="0 0 0.107" quat="0.9238795 0 0 -0.3826834">
                        <inertial pos="-0.0000376 0.0119128 0.0207260" mass="0.6544" fullinertia="0.00186 0.0003 0.00174 0.0 0.0 -2e-05"/>
                        <geom mesh="hand_0" material="off_white" class="visual"/>
                        <geom mesh="hand_1" material="black" class="visual"/>
                        <geom mesh="hand_2" material="black" class="visual"/>
                        <geom mesh="hand_3" material="white" class="visual"/>
                        <geom mesh="hand_4" material="off_white" class="visual"/>
                        <geom mesh="hand_c" class="collision"/>
                        <body name="fr3_leftfinger" pos="0 0 0.0584">
                          <inertial pos="0 0.0152850 0.0219675" mass="0.0291" fullinertia="8.49e-06 8.53e-06 1.77e-06 0.0 0.0 -1.06e-06"/>
                          <joint name="fr3_finger_joint1" class="finger"/>
                          <geom mesh="finger_0" material="off_white" class="visual"/>
                          <geom mesh="finger_1" material="black" class="visual"/>
                          <geom mesh="finger_0" class="collision"/>
                          <geom class="fingertip_pad_collision_1"/>
                          <geom class="fingertip_pad_collision_2"/>
                          <geom class="fingertip_pad_collision_3"/>
                          <geom class="fingertip_pad_collision_4"/>
                          <geom class="fingertip_pad_collision_5"/>
                        </body>
                        <body name="fr3_rightfinger" pos="0 0 0.0584" quat="0 0 0 1">
                          <inertial pos="0 0.0152850 0.0219675" mass="0.0291" fullinertia="8.49e-06 8.53e-06 1.77e-06 0.0 0.0 -1.06e-06"/>
                          <joint name="fr3_finger_joint2" class="finger"/>
                          <geom mesh="finger_0" material="off_white" class="visual"/>
                          <geom mesh="finger_1" material="black" class="visual"/>
                          <geom mesh="finger_0" class="collision"/>
                          <geom class="fingertip_pad_collision_1"/>
                          <geom class="fingertip_pad_collision_2"/>
                          <geom class="fingertip_pad_collision_3"/>
                          <geom class="fingertip_pad_collision_4"/>
                          <geom class="fingertip_pad_collision_5"/>
                        </body>
                      </body>
                    </body>
                  </body>
                </body>
              </body>
            </body>
          </body>
        </body>
      </body>
    </body>
  </worldbody>

  <tendon>
    <fixed name="split">
      <joint joint="fr3_finger_joint1" coef="0.5"/>
      <joint joint="fr3_finger_joint2" coef="0.5"/>
    </fixed>
  </tendon>

  <equality>
    <joint joint1="fr3_finger_joint1" joint2="fr3_finger_joint2" solimp="0.95 0.99 0.001" solref="0.005 1"/>
  </equality>

  <!-- torque control mode -->
  <actuator>
    <motor class="fr3" name="fr3_joint1" joint="fr3_joint1" ctrlrange="-87 87"/>
    <motor class="fr3" name="fr3_joint2" joint="fr3_joint2" ctrlrange="-87 87"/>
    <motor class="fr3" name="fr3_joint3" joint="fr3_joint3" ctrlrange="-87 87"/>
    <motor class="fr3" name="fr3_joint4" joint="fr3_joint4" ctrlrange="-87 87"/>
    <motor class="fr3" name="fr3_joint5" joint="fr3_joint5" ctrlrange="-12 12"/>
    <motor class="fr3" name="fr3_joint6" joint="fr3_joint6" ctrlrange="-12 12"/>
    <motor class="fr3" name="fr3_joint7" joint="fr3_joint7" ctrlrange="-12 12"/>
    <motor class="fr3" name="fr3_finger_joint1" tendon="split" ctrlrange="-100 100"/>
  </actuator>
  
  <!-- position control mode -->
  <!-- <actuator>
    <position class="fr3" name="fr3_joint1" joint="fr3_joint1" kp="4500" kv="450"/>
    <position class="fr3" name="fr3_joint2" joint="fr3_joint2" kp="4500" kv="450"/>
    <position class="fr3" name="fr3_joint3" joint="fr3_joint3" kp="3500" kv="350"/>
    <position class="fr3" name="fr3_joint4" joint="fr3_joint4" kp="3500" kv="350"/>
    <position class="fr3" name="fr3_joint5" joint="fr3_joint5" kp="2000" kv="200"/>
    <position class="fr3" name="fr3_joint6" joint="fr3_joint6" kp="2000" kv="200"/>
    <position class="fr3" name="fr3_joint7" joint="fr3_joint7" kp="2000" kv="200"/>
    <motor class="fr3" name="fr3_finger_joint1" tendon="split" ctrlrange="-100 100"/>
  </actuator> -->
  <contact>
    <exclude body1="fr3_link0" body2="fr3_link1"/>
    <exclude body1="fr3_hand" body2="fr3_leftfinger"/>
    <exclude body1="fr3_hand" body2="fr3_rightfinger"/>
  </contact>

  <keyframe>
    <key name="home" qpos="0 -0.785 0 -2.356 0 1.57 -0.785 0.04 0.04"/>
  </keyframe>

</mujoco>